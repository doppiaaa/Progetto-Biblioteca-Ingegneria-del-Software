<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Biblioteca: Documentazione Tecnica: Sistema di Gestione Biblioteca</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Biblioteca
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Documentazione Tecnica: Sistema di Gestione Biblioteca</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
1. Panoramica del Sistema</h1>
<p>Il diagramma delle classi rappresenta l'architettura software di un'applicazione desktop sviluppata in <b>JavaFX</b> per la gestione di una biblioteca. Il sistema permette la gestione <b>CRUD</b> (Create, Read, Update, Delete) di <b>Libri</b>, <b>Utenti</b> e <b>Prestiti</b>, garantendo la persistenza dei dati e una separazione tra logica di business e interfaccia utente.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
2. Architettura Software</h1>
<p>Il sistema segue un'architettura derivata dal pattern <b>MVC (Model-View-Controller)</b>, mediata da una classe coordinatrice centrale.</p>
<ul>
<li><b>Model (Modello):</b> Rappresentato dalle classi entità (<code>Libro</code>, <code>Utente</code>, <code>Prestito</code>) e dalle classi di gestione dati (<code>Catalogo</code>, <code>Lista</code>, <code>ListaPrestiti</code>).</li>
<li><b>View (Vista):</b> L'interfaccia grafica è definita tramite file FXML gestiti dai rispettivi controller.</li>
<li><b>Controller:</b> I vari <code>*Controller</code> gestiscono l'interazione utente, mentre <code>MainApp</code> agisce come orchestratore principale.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
3. Analisi dei Componenti</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
3.1 Inizializzazione e Orchestrazione</h2>
<ul>
<li><b>Main:</b> È il punto di ingresso dell'applicazione (<code>main(args)</code>), responsabile dell'avvio del ciclo di vita del software.</li>
<li><b>MainApp:</b> È la classe centrale del sistema.<ul>
<li><b>Responsabilità:</b> Inizializza lo <code>Stage</code> primario, istanzia i gestori dei dati (<code>Catalogo</code>, <code>ListaUtenti</code>, <code>ListaPrestiti</code>) e coordina la navigazione tra le diverse viste.</li>
<li><b>Relazioni:</b> Ha una relazione di <b>composizione</b> (rombo pieno) con i gestori dei dati, indicando che <code>MainApp</code> possiede e controlla il ciclo di vita di questi oggetti.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
3.2 Controller dell'Interfaccia (UI Logic)</h2>
<p>Le classi <code>HomeController</code>, <code>LibriController</code>, <code>UtentiController</code> e <code>PrestitiController</code> gestiscono la logica di presentazione.</p><ul>
<li><b>Dependency Injection:</b> Tutti i controller presentano un metodo <code>setMainApp(MainApp)</code>, indicando che ricevono un riferimento all'applicazione principale per poter navigare tra le schermate e accedere ai dati condivisi.</li>
<li><b>Funzionalità:</b> Espongono metodi per la gestione degli eventi UI (es. <code>clickNuovo</code>, <code>rimuovi</code>, <code>modifica</code>) e per il passaggio di dati (<code>setData</code>, <code>sendAttributi</code>).</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
3.3 Gestione dei Dati (Business Logic Layer)</h2>
<p>Il livello di gestione dati è strutturato gerarchicamente tramite l'uso di <b>Interfacce</b> e <b>Generics</b> per favorire il riuso del codice e il polimorfismo.</p>
<ul>
<li><b>Interfaccia <code>Gestione&lt;T&gt;</code>:</b> Un'interfaccia astratta/generica che definisce le operazioni standard:<ul>
<li><code>getElenco()</code>: Ritorna una <code>ObservableList</code>.</li>
<li><code>aggiungi(T)</code>, <code>rimuovi(T)</code>, <code>modifica(T)</code>: Operazioni di mutazione.</li>
</ul>
</li>
<li><b>Interfacce Specifiche:</b> <code>GestioneLibri</code>, <code>GestioneUtenti</code>, <code>GestionePrestiti</code> estendono <code>Gestione&lt;T&gt;</code> aggiungendo metodi di ricerca specifici (es. <code>ricercaTitolo</code>).</li>
<li><b>Implementazioni Concrete:</b><ul>
<li><code>Catalogo</code>: Implementa <code>GestioneLibri</code>.</li>
<li><code>Lista</code> (o <code>ListaUtenti</code>): Implementa <code>GestioneUtenti</code>.</li>
<li><code>ListaPrestiti</code>: Implementa <code>GestionePrestiti</code>.</li>
<li>Tutte implementano l'interfaccia <code>Serializable</code>, permettendo il salvataggio dello stato dell'oggetto.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
3.4 Modello di Dominio (Entities)</h2>
<p>Le entità rappresentano i dati fondamentali: <b>Libro</b>, <b>Utente</b>, <b>Prestito</b>.</p><ul>
<li>Implementano <code>Comparable</code> (per l'ordinamento) e <code>Serializable</code> (per la persistenza).</li>
<li><b>Relazioni:</b> Un <code>Prestito</code> associa un <code>Libro</code> e un <code>Utente</code>. Dal diagramma si evince una relazione tra <code>Prestito</code> e <code>Libro</code> (molteplicità 1 a 0..3) e tra <code>Prestito</code> e <code>Utente</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
3.5 Persistenza</h2>
<ul>
<li><b>Interfaccia <code>SalvataggioDati</code>:</b> Definisce il contratto per il salvataggio e caricamento (<code>salva</code>, <code>carica</code>). Questo applica il principio di <em>Inversion of Control</em>, disaccoppiando la logica di business dal supporto di memorizzazione fisico.</li>
<li>**<code>GestoreFile</code>:** Implementa <code>SalvataggioDati</code>. Si occupa della serializzazione delle liste di oggetti su file binari o di testo.</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
3.6 Gestione delle Eccezioni</h2>
<p>Sono definite eccezioni personalizzate per gestire errori di dominio specifici, lanciate dai metodi delle classi di gestione:</p><ul>
<li><code>PrestitoNonValidoException</code></li>
<li><code>EliminazioneNonValidaException</code></li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md12"></a>
4. Design Pattern Rilevati</h1>
<ol type="1">
<li><b>Facade / Mediator:</b> <code>MainApp</code> agisce come una facciata semplificata per i controller e media la comunicazione tra le parti del sistema.</li>
<li><b>Observer Pattern:</b> Utilizzato implicitamente tramite <code>ObservableList</code> di JavaFX. Quando i dati nel Catalogo cambiano, la UI si aggiorna automaticamente.</li>
<li><b>Strategy Pattern (parziale):</b> L'uso dell'interfaccia <code>SalvataggioDati</code> permette di cambiare la strategia di persistenza senza modificare l'applicazione.</li>
<li><b>Template Method / Generic Programming:</b> L'uso di <code>Gestione&lt;T&gt;</code> definisce uno scheletro comune per le operazioni CRUD.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md14"></a>
5. Vista Dinamica e Flussi Operativi (Sequence Diagrams)</h1>
<h2><a class="anchor" id="autotoc_md15"></a>
5.1 Inserimento Nuova Entità (Generico)</h2>
<ul>
<li><b>Diagramma:</b> <em>Add Generic</em></li>
<li><b>Flusso:</b> L'attore inizia l'azione <code>clickNuovo()</code>. Il sistema mostra un dialog di inserimento.</li>
<li><b>Validazione:</b> Alla conferma (<code>sendAttributi</code>), il gestore controlla l'unicità tramite <code>checkID(String)</code> (es. ISBN o Matricola).</li>
<li><b>Esito:</b><ul>
<li><em>False (ID non presente):</em> L'oggetto viene creato (<code>&lt;&lt;create&gt;&gt;</code>), aggiunto e salvato.</li>
<li><em>True (ID duplicato):</em> Operazione abortita, messaggio di errore ("Elemento già nel Database").</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
5.2 Modifica Entità (Generico)</h2>
<ul>
<li><b>Diagramma:</b> <em>Modify Generic</em></li>
<li><b>Flusso:</b> Selezione elemento e click su <code>modifica()</code>.</li>
<li><b>Binding:</b> Il controller recupera i dati (<code>popolaForm(T)</code>) per il dialog.</li>
<li><b>Persistenza:</b> Le modifiche sono inviate tramite una <code>Map</code> (DTO implicito). Il gestore aggiorna il modello e notifica il successo.</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
5.3 Rimozione Entità e Integrità Referenziale</h2>
<ul>
<li><b>Diagramma:</b> <em>Delete Generic</em></li>
<li><b>Flusso:</b> Richiesta <code>rimuovi()</code> e conferma esplicita ("Are you sure?").</li>
<li><b>Guardia:</b> <code>checkPrestiti()</code> verifica se l'entità ha dipendenze attive.<ul>
<li><em>True (Vincoli ok):</em> Oggetto rimosso fisicamente.</li>
<li><em>False (Violazione):</em> Viene lanciata <code>EliminazioneNonValidaException</code>. Il controller mostra errore ("Prestito Attivo"), prevenendo inconsistenze.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
5.4 Registrazione Prestito (Workflow Transazionale)</h2>
<ul>
<li><b>Diagramma:</b> <em>Add Loan</em></li>
<li><b>Interazione:</b> Selezione sequenziale di Libro e Utente.</li>
<li><b>Doppia Validazione:</b><ol type="1">
<li><code>checkDisponibilità()</code> su Libro (copie &gt; 0).</li>
<li><code>checkDisponibilità()</code> su Utente (limite prestiti/sanzioni).</li>
</ol>
</li>
<li><b>Aggiornamento:</b> Se entrambi i check hanno successo: creazione <code>Prestito</code>, decremento copie libro (<code>downCopie()</code>), registrazione prestito.</li>
<li><b>Errore:</b> Se un check fallisce, viene sollevata <code>PrestitoNonValidoException</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
5.5 Restituzione Prestito</h2>
<ul>
<li><b>Diagramma:</b> <em>Return Loan</em></li>
<li><b>Flusso:</b> Selezione prestito e comando <code>disattiva()</code>.</li>
<li><b>Side-effects:</b><ol type="1">
<li><code>upCopie()</code> sul Libro (incremento disponibilità).</li>
<li>Aggiornamento stato prestito.</li>
<li>Notifica "Libro restituito".</li>
</ol>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md21"></a>
6. Giustificazione delle Scelte Progettuali e Analisi Qualitativa</h1>
<p>La progettazione mira a massimizzare la qualità interna del software, con focus su <b>manutenibilità</b> e <b>modularità</b>.</p>
<h2><a class="anchor" id="autotoc_md22"></a>
6.1 Decomposizione e Modularità</h2>
<p>Il sistema usa una decomposizione <b>Object-Oriented</b> mappando le entità del dominio in classi. L'architettura a layer rispetta la <b>Separazione delle Preoccupazioni (SoC)</b>:</p><ol type="1">
<li><b>View/Controller:</b> Gestione interazione.</li>
<li><b>Domain Logic:</b> Regole di business (<code>Gestione&lt;T&gt;</code>).</li>
<li><b>Data:</b> Stato (<code>Libro</code>, <code>Utente</code>).</li>
<li><b>Persistenza:</b> Storage fisico (<code>GestoreFile</code>).</li>
</ol>
<h2><a class="anchor" id="autotoc_md23"></a>
6.2 Analisi della Coesione (Cohesion)</h2>
<p>Il progetto punta alla <b>Coesione Funzionale</b> (il livello più alto).</p><ul>
<li><b>Gestione&lt;T&gt;:</b> Contiene solo metodi per la gestione della collezione (CRUD), senza logica UI o I/O di basso livello.</li>
<li><b>Entità:</b> Metodi strettamente legati agli attributi.</li>
<li><b>GestoreFile:</b> Coesione focalizzata solo sulla serializzazione/deserializzazione.</li>
</ul>
<h2><a class="anchor" id="autotoc_md24"></a>
6.3 Analisi dell'Accoppiamento (Coupling)</h2>
<p>Obiettivo: <b>Basso Accoppiamento</b>.</p><ul>
<li><b>Accoppiamento per Dati:</b> I controller passano solo i dati necessari (<code>Map</code> o oggetto <code>T</code>) ai gestori.</li>
<li><b>Disaccoppiamento tramite Interfacce:</b> L'uso di <code>SalvataggioDati</code> applica l'<b>Inversione della Dipendenza</b>. Le classi di gestione dipendono dall'astrazione, non dal <code>GestoreFile</code> concreto (principio Open-Closed).</li>
<li><b>Associazione vs Ereditarietà:</b> Privilegiata l'associazione (es. <code>Prestito</code> -&gt; <code>Libro</code>) per ridurre l'accoppiamento forte tipico dell'ereditarietà.</li>
</ul>
<h2><a class="anchor" id="autotoc_md25"></a>
6.4 Robustezza e "Design by Contract"</h2>
<p>La progettazione incorpora elementi di Design by Contract.</p><ul>
<li><b>Precondizioni:</b> Verifica di disponibilità (<code>checkDisponibilità</code>) prima di creare prestiti.</li>
<li><b>Eccezioni:</b> <code>PrestitoNonValidoException</code> impedisce violazioni delle invarianti (es. prestare un libro con 0 copie).</li>
<li><b>Integrità:</b> <code>checkPrestiti()</code> agisce da guardia contro stati inconsistenti.</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
6.5 Principio DRY</h2>
<p>L'uso di <code>Gestione&lt;T&gt;</code> applica il principio <b>DRY (Don't Repeat Yourself)</b>, centralizzando la logica CRUD ed evitando duplicazioni tra gestori di entità diverse. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
